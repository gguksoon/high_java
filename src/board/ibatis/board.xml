<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org/DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<!-- 이 문서에서는 직접 처리할 SQL문을 등록해서 처리될 수 있도록 설정하는 문서이다. -->
<!-- namespace속성 ==> 아래에서 작성한 SQL문을 호출할 때 같이 사용된다. -->
<sqlMap namespace="jdbcBoard">
	<!-- 
	 	위에서 나열한 4개의 태그에서 공통으로 사용하는 속성들
	 	1) id속성: 해당 태그의 SQL문을 Java의 Dao에서 호출할 때 사용되는 이름으로
	 			  <sqlMap> 태그의 namespace와 같이 사용한다.	
		2) parameterClass속성: SQL문에 사용될데이터가 들어있는 객체를 지정한다.
				(보통 VO클래스, 자바의 자료형이름 등이 사용된다.)
		3) resultClass속성: 처리할 SQL문이 select문일 경우에 사용되는 속성으로
				select문의 처리 결과를 저장할 객체를 지정한다.
				(이 속성에 지정하는 객체는 1개의 레코드가 저장될 크기의 객체를 지정하면 된다.)
				(보통 VO클래스, 자바의 자료형이름 등이 사용된다.)
				
		- 위의 parameterClass와 resultClass에 지정할 객체는 typeAlias에 지정한
		  'alias명'을 사용해도 된다.
	-->
	  
	<!-- insert 연습 -->		<!-- 파라미터에 경로 이용 -->
	<insert id="insertBoard" parameterClass="boardVO"> 
		insert into JDBC_BOARD 
			values(BOARD_SEQ.NEXTVAL, #board_title#, #board_writer#, 
					sysdate, 0, #board_content#)
	</insert>
	
	<!-- update 연습 -->		<!-- 파라미터에 alias 이용 -->
	<!-- 파라미터로 가져온 값을 '컬럼명'의 자리에 사용할 경우 $기호를 사용한다.
		 ex) $변수명$ 또는 $키값$ -->
	<update id="updateBoard" parameterClass="map"> 
		update jdbc_board set
			board_title = #board_title#
			board_date = sysdate
			board_content = #board_content#
		where board_no = #board_no#
	</update>
	
	<!-- delete 연습 -->		<!-- 파라미터에 String 값만 사용하니 string 이용 -->
	<delete id="deleteBoard" parameterClass="int"> 
		delete from jdbc_board where board_no = #board_no#
	</delete>
	<!--
	parameterClass에 설정되는 값이 단일값(즉, 1개의 데이터)이면
	SQL문에 이 값을 나타내는 변수는 특별히 이름이 정해지지 않았다.
	(즉, 사용자가 임의로 지정할 수 있다.)
	-->
	   
	<!-- select 연습 -->
	<select id="getAllBoardList" resultClass="boardVO">
		select board_no, board_title, board_writer, to_char(board_date, 'YYYY-MM-DD') board_date,
			board_cnt, board_content
		from jdbc_board
		order by board_no desc
	</select>
	
	<select id="getBoard" parameterClass="int" resultClass="boardVO">
		select board_no, board_title, board_writer, to_char(board_date, 'YYYY-MM-DD') board_date,
		board_cnt, board_content
		from jdbc_board
		where board_no = #board_no#
	</select>
	
	<select id="searchBoard" parameterClass="String" resultClass="boardVO">
		select board_no, board_title, board_writer,
			to_char(board_date, 'YYYY-MM-DD') board_date,
			board_cnt, board_content
		from jdbc_board
		where board_title like '%' || #board_title# || '%'
		order by board_no desc
	</select>
	  
</sqlMap>












